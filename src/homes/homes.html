{% extends "layout.html" %} {% block content %}

<div class='profile-slider'>
  <div class="wallop">
    <div class="Wallop-list">
      {% if home.photos %}
        {% for photo in home.photos %}
        <div class="Wallop-item">
          <img src="{{photo}}" />
        </div>
        {% endfor %}
      {% endif %}
    </div>
    <a class="Wallop-buttonPrevious white-text"><i class="fa fa-chevron-circle-left fa-2x"></i></a>
    <a class="Wallop-buttonNext white-text"><i class="fa fa-chevron-circle-right fa-2x"></i></a>
  </div>
  <div class='immersion-types'>
    <div class='tag'>
      {% for immersion,_ in home.immersions %}
      <div class='{{ immersion }}'>
        {{ immersion }}
      </div>
      {% endfor %}
    </div>
  </div>
  <a id='book-a-room' class='btn btn-primary'>{{translations.common.Book_a_room}}</a>
</div>

<div class='home-user-image'>
  <img src='{{ home.host.photo }}'>
</div>

<div class='home-title row z-depth-1'>
  <div class='row no-margin'>
    <h1>{{home.host.firstName}}'s
      {% if home.basics.family %}
        {{translations.common.family_home}}
        {% else %}
        {{translations.common.home}}
      {% endif %}
    </h1>
  </div>

  <div class='home-details'>
    <span class='type'>
      {{home.basics.homeType}}
    </span>
    <span class='home-details__divider'><i class="fa fa-chevron-right"></i></span>
    <span class='location'>
      {{home.location.city}}
    </span>
    <span class='rating'>
      <span class='count'>
        ({{home.reviewCount}})
      </span>
      <span class='stars'>
        {{home.reviewHTML | safe}}
      </span>
    </span>
  </div>
</div>

<div class='container left-align'>

  <label>{{translations.common.Basic_details}}</label>

  <div class='row'>

    <div class='col s12 m6 l3'>
      <div class='card home-card home-card--fixed-height'>
        <div class='row'>
          <div class='col s12'>
            <i class="fa fa-globe fa-2x grey-text text-lighten-1"></i>
            <span class='title'>{{translations.common.Languages}}</span>
          </div>
        </div>
        <div class='row content'>
          <div class='col s12 m6 l12'>
            <p class='no-margin-bottom'>
              <strong>{{translations.common.Learning}}:</strong>
            </p>

            {% for language in home.host.languagesLearning %}
              <div class='chip chip--learning'>
                {{ language.language }}
              </div>
            {% endfor %}

          </div>
          <div class='col s12 m6 l12'>
            <p class='no-margin-bottom'>
              <strong>{{translations.common.Speaks}}:</strong>
            </p>
            {% for language in home.host.languagesKnown %}
              <div class='chip chip--speaks'>
                {{ translations.languages[language.language] }}
              </div>
            {% endfor %}
          </div>
          {% if home.immersions.teacher %}
          <div class='col s12 m6 l12'>
            <p class='no-margin-bottom'>
              <strong>Teaches:</strong>
            </p>
            {% for language in home.immersions.teacher.languagesOffered %}
            <div class='chip chip--teaches'>
              {{ translations.languages[language] }}
              {% if language.certified %}
                <a href="#!" class="secondary-content tooltipped" data-position="bottom" data-delay="50" data-tooltip="{{translations.common.Certified}}"><i class="fa fa-certificate certified-language"></i></a>
              {% endif %}
            </div>
            {% endfor %}
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <div class='col s12 m6 l6'>
      <div class='card home-card home-card--fixed-height'>
        <div class='row'>
          <div class='col s12'>
            <i class="fa fa-user fa-2x grey-text text-lighten-1"></i>
            <span class='title'>{{translations.common.About}}</span>
          </div>
        </div>
        <div class='row content'>
          <div class='col s12'>
            <p>
              {{home.description.summary}}
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class='col s12 m12 l3'>
      <div class='card home-card home-card--fixed-height'>
        <div class='row'>
          <div class='col s12'>
            <i class="fa fa-envelope fa-2x grey-text text-lighten-1"></i>
            <span class='title'>{{translations.common.Details}}</span>
          </div>
        </div>
        <div class='row content bottom-align-column'>
          <div class='col s12'>
            <p class='home-details'>
              <span class='icon'><i class="fa fa-venus-mars grey-text text-lighten-1"></span></i>{{home.host.age}}, {{home.user.gender}}
            </p>
            <p class='home-details'>
              <span class='icon'><i class="fa fa-clock-o grey-text text-lighten-1"></span></i>{{translations.common.Member_since}} {{ translations.months.short[home.host.joinedDate[1]-1] }}, {{home.host.joinedDate[0]}}
            </p>
            <p class='home-details'>
              <span class='icon'><i class="fa fa-map-marker grey-text text-lighten-1"></span></i>{{home.location.city}}, {{translations.countries[home.location.country]}}
            </p>
            {% if home.basics.family %}
            <p class='home-details'>
              <span class='icon'><i class="fa fa-users grey-text text-lighten-1"></span></i>{{translations.common.Family_home}}
            </p>
            {% endif %}
            <div class='divider'></div>
          </div>
          <div class='col s12 bottom center-align'>
            <a class='btn btn-secondary'>{{translations.common.Contact_host}}</a>
          </div>
        </div>
      </div>

    </div>

  </div>

</div>

<div class='home-section-divider'></div>

<div class='container left-align section'>

  <label>{{translations.common.Booking}}</label>

  <div id='booking-row' class='row no-margin'>

    <div class='col s12 m3 l3'>
      <div class='card home-card'>
        <div class='row'>
          <div class='col s12'>
            <i class="fa fa-calendar-o fa-2x grey-text text-lighten-1"></i>
            <span class='title'>{{translations.common.Booking}}</span>
          </div>
        </div>
        <div class='row'>
          <div class='col s12'>
            <p>
              {{translations.common.choose_your_dates}}:
            </p>
          </div>
        </div>

        <div class='row'>
          <div class='col s12 m12 l6'>
            <div class='input-field '>
              <input id='arrival' type="text" class='datepicker' value='' placeholder='yyyy-mm-dd' />
              <label htmlFor='arrival' class='active left'>{{translations.common.Arrival}}</label>
            </div>
          </div>
          <div class='col s12 m12 l6'>
            <div class='input-field '>
              <input id='departure' type="text" class="datepicker" value='' placeholder='yyyy-mm-dd' />
              <label htmlFor='departure' class='active left'>{{translations.common.Departure}}</label>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class='col s12 m9 l9'>
      {% for room in home.rooms %}
      <div class='card home-card'>
        <div class='row'>

          <div class='col s12'>
            <i class="fa fa-bed fa-2x grey-text text-lighten-1"></i>
            <span class='title'>{{room.name}}</span>
          </div>
        </div>
        <div class='row'>
          <div class='col s12 m4 l5'>
            <p>

            </p>
            <img class='home-room-image materialboxed' src='{{room.img}}' />
          </div>
          <div class='col s6 m6 l2'>
            <p class='grey-text text-darken-1'>
              <strong>{{translations.common.Basics}}:</strong>
            </p>
            <p class='home-details'>
              <span class='icon'><i class="fa fa-user grey-text text-lighten-1"></span></i>{{translations.common.Sleeps}}: {{room.vacancies}}
            </p>
            <p class='home-details'>
              <span class='icon'><i class="fa fa-users grey-text text-lighten-1"></span></i>{{translations.common.Shared}}: {{room.shared}}
            </p>
            <p class='home-details'>
              <span class='icon'><i class="fa fa-bed grey-text text-lighten-1"></span></i>{{translations.common.Bed_type}}: {{translations.rooms.bed_types[room.bed]}}
            </p>
          </div>
          <div class='col s6 m6 l2'>
            <p class='grey-text text-darken-1'>
              <strong>{{translations.common.Facilities}}:</strong>
            </p>
            {% for facility in room.facilities %}
              <p class='home-details'>
                <span class='icon'><i class="fa {{ constants.icons.facilities[facility] }} grey-text text-lighten-1"></span></i>{{translations.rooms.facilities[facility]}}
              </p>
            {% endfor %}
          </div>
          <div class='col s6 m12 l3'>
            <p class='grey-text text-darken-1'>
              <strong>{{translations.common.Price}}:</strong>
            </p>

            {% if home.immersions.stay %}
            <p class='home-details capitalise'>
              {{translations.common.Stay}}: <span class='right'>{{ room.price }} {{home.pricing.currency}}/{{translations.common.week}}</span>
            </p>
            {% endif %}

            {% if home.immersions.tandem %}
            <p class='home-details capitalise'>
              {{ translations.common.Tandem }}: <span class='right'>{{ room.price * (100 - home.immersions.tandem.languagesInterested[0].discount)/100 }} {{home.pricing.currency}}/{{translations.common.week}}</span>
            </p>
            {% endif %}

            {% if home.immersions.teacher %}
            <p class='home-details capitalise'>
              {{ translations.common.Teacher }}: <span class='right'>{{ room.price + (home.immersions.teacher.hourly * home.immersions.teacher.packages[0]) }} {{home.pricing.currency}}/{{translations.common.week}}</span>
            </p>
            {% endif %}
          </div>
        </div>

        <div class='row section'>
          <div class='col s12'>
            <div class='divider'></div>
          </div>
        </div>

        <div class='row bottom-align-row'>
          <div class='col s8'>
            <label>{{translations.common.Room_description}}</label><br>

              {{room.description}}

          </div>
          <div class='col s4 right-align bottom'>
            <a href={{room.bookNow}} class='btn btn-primary'>{{translations.common.Book_now}}</a>
          </div>
        </div>

      </div>
      {% endfor %}
    </div>

  </div>

</div>
<div class='home-section-divider'></div>

<div class='container left-align section'>

  <label>{{translations.common.Details_and_reviews}}</label>
  <div class='row no-margin '>

    <div class='col s12 m12 l5'>
      <div class='card home-card home-card--fixed-height-tall'>
        <div class='row'>
          <div class='col s12'>
            <i class="fa fa-home fa-2x grey-text text-lighten-1"></i>
            <span class='title'>{{translations.common.Home_info}}</span>
          </div>
        </div>
        <div class='row content'>

          {% if home.basics.AMENITIES %}
            <div class='col s12 m6 l6'>
              <p class='grey-text text-darken-1'>
                <strong>{{translations.common.Amenities}}:</strong>
              </p>
              {% for amenity in home.basics.AMENITIES %}
              <p class='home-details'>
                <span class='icon'><i class="fa {{constants.icons.amenities[amenity]}} grey-text text-lighten-1"></i></span>{{ translations.homes.amenities[amenity] }}
              </p>
              {% endfor %}
            </div>
          {% endif %}

          {% if home.basics.EXTRAS %}
            <div class='col s12 m6 l6'>
              <p class='grey-text text-darken-1'>
                <strong>{{translations.homes.extras_label}}:</strong>
              </p>
              {% for extra in home.basics.EXTRAS %}
              <p class='home-details'>
                <span class='icon'><i class="fa {{constants.icons.extras[extra]}} grey-text text-lighten-1"></span></i>{{translations.homes.extras[extra]}}
              </p>
              {% endfor %}
            </div>
          {% endif %}

          {% if home.pricing.extras[0] %}
            <div class='col s12 m6 l6'>
              <p class='grey-text text-darken-1'>
                <strong>{{translations.common.Services}}:</strong>
              </p>
              {% for service in home.pricing.extras %}
              <p class='home-details'>
                <span class='icon'><i class="fa {{constants.icons.services[service.service]}} grey-text text-lighten-1"></span></i>{{translations.homes.services[service.service]}}
              </p>
              {% endfor %}
            </div>
          {% endif %}

          {% if home.basics.PREFERENCES %}
            <div class='col s12 m6 l6'>
              <p class='grey-text text-darken-1'>
                <strong>{{translations.common.Preferences}}:</strong>
              </p>
              {% for preference in home.basics.PREFERENCES %}
                <p class='home-details'>
                  <span class='icon'><i class="fa {{constants.icons.preferences[preference]}} grey-text text-lighten-1"></span></i>{{ translations.homes.preferences[preference] }}
                </p>
              {% endfor %}
            </div>
          {% endif %}

          {% if home.description.rules %}
            <div class='col s12 m6 l6'>
              <p class='grey-text text-darken-1'>
                <strong>{{translations.common.Rules}}:</strong>
              </p>
              <p>
                {{home.description.rules}}
              </p>
            </div>
          {% endif %}

        </div>
      </div>
    </div>

    <div class='col s12 m12 l7'>
      <div class='card home-card home-card--fixed-height-tall'>
        <div class='row bottom-align-row'>
          <div class='col s9'>
            <i class="fa fa-star-o fa-2x grey-text text-lighten-1"></i>
            <span class='title'>{{translations.common.Reviews}}</span>
          </div>
          <div class='col s3 bottom right-align'>
            <span class='rating'>
              <span class='count'>
                ({{ home.reviewCount }})
              </span>
              <span class='stars'>
                {{home.reviewHTML | safe}}
              </span>
            </span>
          </div>
        </div>
        <div class='row no-margin'>
          <div class='col s12 content'>

            {% if home.reviews %}
              {% for review in home.reviews %}
                <div class='card home-card review'>
                  <div class='row'>
                    <div class='col s2 center-align'>
                      <img class='circle host-picture' src='{{review.photo}}'>
                      <br>
                      {{review.name}}
                    </div>
                    <div class='col s10'>
                      <p>
                        {{review.content}}
                      </p>
                    </div>
                    <div class='col s12 right-align grey-text text-lighten-1 no-margin'>
                      {{review.date}}
                    </div>
                  </div>
                </div>
              {% endfor %}
            {% endif %}

          </div>
        </div>
      </div>

    </div>

  </div>
</div>
<div class='home-section-divider'></div>
<div class='container'>

  <div class='row section no-margin-bottom left-align'>

    <div class='col s12'>
      <div class='card home-card'>
        <div class='row'>
          <div class='col s12'>
            <i class="fa fa-map-marker fa-2x grey-text text-lighten-1"></i>
            <span class='title'>{{translations.common.Location}}</span>
          </div>
        </div>
        <div class='row section no-margin-bottom'>
           <div id="map" style='height:300px;width:100%'></div>
          <script>
          var map;
            function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: {{home.location.lat}}, lng: {{home.location.lng}}},
              zoom: 8,
              options: {
                scrollwheel: false,
                mapTypeControl: false,
                streetViewControl: false
              }
            });
            var marker = new google.maps.Marker({
              position: {
                "lat":{{home.location.lat}},
                "lng":{{home.location.lng}}
              },
              map: map
            });
          }
          </script>
          <script src="https://maps.googleapis.com/maps/api/js?callback=initMap" async defer></script>
        </div>
      </div>
    </div>

  </div>

</div>

{% endblock %}
